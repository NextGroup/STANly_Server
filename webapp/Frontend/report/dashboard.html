<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Dashboard@STANly</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="STANly@Software Maestro">
    <meta name="author" content="Team STANly">
    <!-- Le styles -->
    <link rel="stylesheet" href="../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="../assets/css/custom-bootstrap-responsive.css">
    <!--<link rel="stylesheet" href="../assets/css/docs.css">-->

    <script src="../assets/js/jquery-1.7.1.min.js"></script>
    <script src="../assets/js/d3.js"></script>
    <script src="../assets/js/layout.js"></script>

</head>
<!--사이즈 변경 코드-->
<script type="text/javascript">

    function debuging() {
        $(".span2").css("width","3000px");
        //console.log(width);
    }
    debuging();
    $(window).resize(function() {
        //$('.row').css("width", $(window).width + "px");

        var dashboardsidebarwidth = parseInt($(".span3").css("width"));
        var dashboardsidebarmarginleft = parseInt($(".span5").css("margin-left"));
        var containerwidth =parseInt($(window).width());

        console.log(containerwidth);

        var dashboardhalfgrid5width =  (containerwidth - (dashboardsidebarwidth +(dashboardsidebarmarginleft*2)))/2- 20;

        $('.span5').css("width", dashboardhalfgrid5width + "px");

        //$('row').css("width", $(window).width + "px");
    });
</script>
<!-- 하이차트 -->
<script  type="text/javascript">
    $(function () {
        var chart;
        $(document).ready(function() {

            var colors = Highcharts.getOptions().colors,
                    categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],
                    name = 'Browser brands',
                    data = [{
                        y: 55.11,
                        color: colors[0],
                        drilldown: {
                            name: 'MSIE versions',
                            categories: ['MSIE 6.0'],
                            data: [10.85],
                            color: colors[0]
                        }
                    }, {
                        y: 21.63,
                        color: colors[1],
                        drilldown: {
                            name: 'Firefox versions',
                            categories: ['Firefox 2.0', 'Firefox 3.0', 'Firefox 3.5', 'Firefox 3.6', 'Firefox 4.0'],
                            data: [0.20, 0.83, 1.58, 13.12, 5.43],
                            color: colors[1]
                        }
                    }, {
                        y: 11.94,
                        color: colors[2],
                        drilldown: {
                            name: 'Chrome versions',
                            categories: ['Chrome 5.0', 'Chrome 6.0', 'Chrome 7.0', 'Chrome 8.0', 'Chrome 9.0',
                                'Chrome 10.0', 'Chrome 11.0', 'Chrome 12.0'],
                            data: [0.12, 0.19, 0.12, 0.36, 0.32, 9.91, 0.50, 0.22],
                            color: colors[2]
                        }
                    }, {
                        y: 7.15,
                        color: colors[3],
                        drilldown: {
                            name: 'Safari versions',
                            categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon',
                                'Safari 3.1', 'Safari 4.1'],
                            data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
                            color: colors[3]
                        }
                    }, {
                        y: 2.14,
                        color: colors[4],
                        drilldown: {
                            name: 'Opera versions',
                            categories: ['Opera 9.x', 'Opera 10.x', 'Opera 11.x'],
                            data: [ 0.12, 0.37, 1.65],
                            color: colors[4]
                        }
                    }];

            function setChart(name, categories, data, color) {
                chart.xAxis[0].setCategories(categories, false);
                chart.series[0].remove(false);
                chart.addSeries({
                    name: name,
                    data: data,
                    color: color || 'white'
                }, false);
                chart.redraw();
            }

            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'pollution',
                    type: 'column'
                },
                title: {
                    text: 'Browser market share, April, 2011'
                },
                subtitle: {
                    text: 'Click the columns to view versions. Click again to view brands.'
                },
                xAxis: {
                    categories: categories
                },
                yAxis: {
                    title: {
                        text: 'Total percent market share'
                    }
                },
                plotOptions: {
                    column: {
                        cursor: 'pointer',
                        point: {
                            events: {
                                click: function() {
                                    var drilldown = this.drilldown;
                                    if (drilldown) { // drill down
                                        setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color);
                                    } else { // restore
                                        setChart(name, categories, data);
                                    }
                                }
                            }
                        },
                        dataLabels: {
                            enabled: true,
                            color: colors[0],
                            style: {
                                fontWeight: 'bold'
                            },
                            formatter: function() {
                                return this.y +'%';
                            }
                        }
                    }
                },
                tooltip: {
                    formatter: function() {
                        var point = this.point,
                                s = this.x +':<b>'+ this.y +'% market share</b><br/>';
                        if (point.drilldown) {
                            s += 'Click to view '+ point.category +' versions';
                        } else {
                            s += 'Click to return to browser brands';
                        }
                        return s;
                    }
                },
                series: [{
                    name: name,
                    data: data,
                    color: 'white'
                }],
                exporting: {
                    enabled: false
                }
            });
        });

    });
</script>
<!-- code size(zoomable) -->
<script type="text/javascript">
    var w = 1280 - 80,
            h = 800 - 180,
                x = d3.scale.linear().range([0, w]),
                y = d3.scale.linear().range([0, h]),
                color = d3.scale.category20c(),
                root,
                node;

        var treemap = d3.layout.treemap()
                .round(false)
                .size([w, h])
                .sticky(true)
                .value(function(d) { return d.size; });

        var svg = d3.select("#codesize").append("div")
                .attr("class", "chart")
                .style("width", w + "px")
                .style("height", h + "px")
                .append("svg:svg")
                .attr("width", w)
                .attr("height", h)
                .append("svg:g")
                .attr("transform", "translate(.5,.5)");

        function drawTreemap() {
            $.getJSON( {
                type :'GET'
                ,asyn :true
                ,url :'flare.json'
            ,dataType :'json'
            //,contentType :"application/x-www-form-urlencoded;charset=UTF-8"
            ,beforeSend : function(xhr){
            }
            ,success : function(jsonData) {
                node = root = jsonData;

                var nodes = treemap.nodes(root)
                        .filter(function(d) { return !d.children; });

                var cell = svg.selectAll("g")
                        .data(nodes)
                        .enter().append("svg:g")
                        .attr("class", "cell")
                        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
                        .on("click", function(d) { return zoom(node == d.parent ? root : d.parent); });

                cell.append("svg:rect")
                        .attr("width", function(d) { return d.dx - 1; })
                        .attr("height", function(d) { return d.dy - 1; })
                        .style("fill", function(d) { return color(d.parent.name); });

                cell.append("svg:text")
                        .attr("x", function(d) { return d.dx / 2; })
                        .attr("y", function(d) { return d.dy / 2; })
                        .attr("dy", ".35em")
                        .attr("text-anchor", "middle")
                        .text(function(d) { return d.name; })
                        .style("opacity", function(d) { d.w = this.getComputedTextLength(); return d.dx > d.w ? 1 : 0; });

                d3.select(window).on("click", function() { zoom(root); });

                d3.select("select").on("change", function() {
                    treemap.value(this.value == "size" ? size : count).nodes(root);
                    zoom(node);
                });
            }
            ,error : function(xhr, textStatus) {
            }
            ,complete : function(xhr, textStatus) {
            }
        });
        function size(d) {
            return d.size;
        }

        function count(d) {
            return 1;
        }

        function zoom(d) {
            var kx = w / d.dx, ky = h / d.dy;
            x.domain([d.x, d.x + d.dx]);
            y.domain([d.y, d.y + d.dy]);

            var t = svg.selectAll("g.cell").transition()
                    .duration(d3.event.altKey ? 7500 : 750)
                    .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

            t.select("rect")
                    .attr("width", function(d) { return kx * d.dx - 1; })
                    .attr("height", function(d) { return ky * d.dy - 1; })

            t.select("text")
                    .attr("x", function(d) { return kx * d.dx / 2; })
                    .attr("y", function(d) { return ky * d.dy / 2; })
                    .style("opacity", function(d) { return kx * d.dx > d.w ? 1 : 0; });

            node = d;
            d3.event.stopPropagation();
        }
    }
    drawTreemap();
</script>


<body data-spy="scroll" data-target=".bs-docs-sidebar">

<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <a class="brand" href="#">STANly</a>
            <ul class="nav">
                <li class="active"><a href="#">DashBoard</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./detail/composition.html">Composition</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./detail/pollution.html">Pollution</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./detail/distance.html">Distance</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./detail/metrics.html">Metrics</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./detail/about.html">About</a></li>
                <li class="divider-vertical"></li>
            </ul>
    </div>
</div>


<div class = "row" style="min-width: 1024px ;width: 10000px">

        <div class="span3">
            <!--<div data-spy="affix">-->
            <ul class="nav nav-tabs nav-stacked">
                <li><a href="#composition"><i class="icon-chevron-right"></i>Composition</a></li>
                <li><a href="#pollution"><i class="icon-chevron-right"></i>Pollution</a></li>
                <li><a href="#distance"><i class="icon-chevron-right"></i>Distance</a></li>
                <li><a href="#metrics"><i class="icon-chevron-right"></i>Metrics</a></li>
            </ul>
        </div>


        <div class = "span5" style=" min-width: 390px;">
            <div id = "pollution" style="border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid;
                                                height: 300px; width: 100%; margin: 1px auto">
            </div>

            <div id = "composition" style="border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid;
                                                height: 300px; width: 100%; margin: 1px auto">
            </div>

            <div id = "distance" style="border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid;
                                                height: 300px; width: 100%; margin: 1px auto">
            </div>
        </div>


        <div class = "span5" style=" min-width: 390px;">
            <div id = "metric" style="border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid;
                                                 height: 300px; width: 100%; margin: 1px auto">
            </div>

            <div id = "codesize" style="border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid;
                                                  height: 300px; width: 100%; margin: 1px auto">
            </div>
        </div>
</div>


<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../assets/js/bootstrap.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

</body>
</html>