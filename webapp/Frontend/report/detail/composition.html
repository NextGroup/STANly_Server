<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="STANly@Software Maestro">
    <meta name="author" content="Team STANly">
    <!-- Le styles -->
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/custom-bootstrap-responsive.css">
    <!--<link rel="stylesheet" href="../../assets/css/docs.css">-->
    <!--<link rel="stylesheet" href="../../assets/jqGrid/css/ui.jqgrid.css">-->
    <!--<link rel="stylesheet" href="../../assets/jqGrid/css/jquery-ui-custom.css">-->
    <!--<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css">-->
    <!--<link rel="stylesheet" href="../../assets/css/detail-layout.css">-->

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
    <script type="text/javascript" src="../../assets/jstree/_lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../../assets/jstree/_lib/jquery.hotkeys.js"></script>
    <script type="text/javascript" src="../../assets/jstree/jquery.jstree.js"></script>



    <script type="text/javascript" src="http://mottie.github.com/tablesorter/js/jquery.tablesorter.js"></script>
    <script type="text/javascript" src="http://mottie.github.com/tablesorter/js/jquery.tablesorter.widgets.js"></script>
    <link rel="stylesheet" href="http://mottie.github.com/tablesorter/css/theme.blue.css">
    <link rel="stylesheet" href="http://mottie.github.com/tablesorter/docs/css/prettify.css">


    <link rel="stylesheet" href="/assets/PackageGraph/css/PackageGraph.css">

    <script type="text/javascript">
        $(function () {
            $("#prjtree")
                .jstree({
                    "json_data" : {
                        "ajax" : {
                            //"url" : "../../assets/jstree/_docs/_stanly_data.json",
                            "url" : "../../assets/jstree/_docs/_simple_data.json",
                            //"data" : function (n) {
                            //    return { id : n.attr ? n.attr("id") : 0 };
                            //}
                        }
                    },
                    "core" : {
                        "animation" : 50
                    },
                    "plugins" : [ "themes", "json_data", "ui", "hotkeys", "types" ],
                    "types" : {
                        "types" : {
                            "PROJECT" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/application.gif'
                                }
                            },
                            "LIBRARY" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/subsystem.gif'
                                }
                            },
                            "PACKAGESET" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/tree.gif'
                                }
                            },
                            "PACKAGE" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/package.gif'
                                }
                            },
                            "CLASS" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/class.gif'
                                }
                            },
                            "INTERFACE" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/interface.gif'
                                }
                            },
                            "ANNOTATION" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/annotation.gif'
                                }
                            },
                            "ENUM" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/enum.gif'
                                }
                            },
                            "CONSTRUCTOR" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/constructor.png'
                                }
                            },
                            "METHOD" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/method.gif'
                                }
                            },
                            "FIELD" : {
                                "icon" : {
                                    "image" : '../../assets/jstree/img/field.gif'
                                }
                            }
                        }
                    }
                })
                .bind("select_node.jstree", function (e, data) {
                        //console.log(data.rslt.obj[0].id);
                        console.log(data.rslt.obj.attr("id"));
                    BuildDetailList();
                });

        });
    </script>
    <!-- 내용 위치&비율 조정-->
    <script type="text/javascript" src="./js/sizealign.js"></script>
</head>
<body>

    <div class="navbar navbar-fixed-top navbar-inverse">
        <div class="navbar-inner">
            <a class="brand" href="#">STANly</a>
            <ul class="nav">
                <li><a href="../dashboard.html">DashBoard</a></li>
                <li class="divider-vertical"></li>
                <li class="active"><a href="./composition.html">Composition</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./pollution.html">Pollution</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./distance.html">Distance</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./metrics.html">Metrics</a></li>
                <li class="divider-vertical"></li>
                <li><a href="./about.html">About</a></li>
                <li class="divider-vertical"></li>
            </ul>
        </div>
    </div>
    <div id="body">
        <div id="sidebar" style="width: 300px; margin: 10px; float: left">
            <div id="sidebar_title">Project Explorer</div>
            <div id="prjtree" style="height: 100%; overflow: auto;"></div>
        </div>
        <div id="content" style="margin: 10px; float: left">
            <div id="mainview_title">Composition</div>
            <div id="mainview" style="height: 70%; margin-bottom: 10px">
                <svg id="MainSVG">
                    <defs>
                        <marker id="arrowhead"
                                viewBox="0 0 10 10"
                                refX="8"
                                refY="5"
                                markerUnits="strokeWidth"
                                markerWidth="8"
                                markerHeight="5"
                                orient="auto"
                                style="fill: #333">
                            <path d="M 0 0 L 10 5 L 0 10 z"></path>
                        </marker>
                    </defs>
                </svg>
                <script src="http://d3js.org/d3.v2.min.js"></script>
                <script src="/assets/PackageGraph/js/dagre.js"></script>
                <script src="/assets/PackageGraph/js/PackageGraph.js"></script>
                <script>

                    var Grapdata = document.querySelector("#inputGraph");
                    var Mainsvg = d3.select("svg");
                    var MainsvgGroup = Mainsvg.append("g").attr("transform", "translate(5, 5)");
                    var MainGraph = new Graph(Mainsvg,MainsvgGroup,"Main","MainGraph.json");

                </script>
            </div>
            <div id="subview"  style="height: 30%; overflow-y: scroll;">
                <div id="detail_title">Relations</div>
                <div id="detail_list"></div>
                <script type="text/javascript">
                    var table;
                    //$(function() {
                    function BuildDetailList(){
                        $.ajax( {
                            type :'GET'
                            ,asyn :true
                            ,url :'test_detail.json'
                            ,dataType :"json"
                            //,contentType :"application/x-www-form-urlencoded;charset=UTF-8"
                            ,beforeSend : function(xhr){
                            }
                            ,success : function(jsonData) {
                                table = JSON.stringify(jsonData);

                                BuildTable();
                                AdjustStyle();
                            }
                            ,error : function(xhr, textStatus) {
                            }
                            ,complete : function(xhr, textStatus) {
                            }
                        });
                    }
                    //});
                    function BuildTable() {
                        table = eval('' + table + '');
                        var tableObject = function (json) {
                            var headerCount = new Object();
                            var createTHEAD = function (id) {
                                var tr = document.createElement("thead");
                                tr.ID = id;
                                return tr;
                            };
                            var createTBODY = function (id) {
                                var tr = document.createElement("tbody");
                                tr.ID = id;
                                return tr;
                            };
                            var createTR = function (id) {
                                var tr = document.createElement("tr");
                                tr.ID = id;
                                return tr;
                            };
                            var createTH = function (html) {
                                var th = document.createElement("th");
                                th.innerHTML = html;
                                return th;
                            };
                            var createTD = function (html) {
                                var td = document.createElement("td");
                                td.innerHTML = html;
                                return td;
                            };
                            var getName = function (id) {
                                for (var name in headerCount) {
                                    if (eval("headerCount." + name) == id) {
                                        return name;
                                    }
                                }
                            };
                            var pTable;
                            if (json.length > 0) {
                                var index = 0;
                                var theadFlag = false;
                                pTable = document.createElement("table");
                                pTable.setAttribute("class","tablesorter tablesorter-blue");
                                pTable.setAttribute("style","margin:0px;");
                                var thead = createTHEAD();
                                var head = createTR();
                                for (var i = 0; i < json.length; i++)
                                    for (var item in json[i]) {
                                        if (!headerCount.hasOwnProperty(item)) {
                                            head.appendChild(createTH(item));
                                            eval('headerCount.' + item + "=" + index);
                                            index++;
                                        }
                                    }
                                thead.appendChild(head);
                                pTable.appendChild(thead);

                                var tbody = createTBODY();
                                for (var i = 0; i < json.length; i++) {
                                    var row = new createTR(i);
                                    for (var j = 0; j < index; j++) {
                                        var name = getName(j);
                                        if (eval("json[" + i + "].hasOwnProperty('" + name + "')")) {
                                            row.appendChild(createTD(eval('json[' + i + '].' + name)));
                                        }
                                        else
                                            row.appendChild(createTD(''));
                                    }
                                    tbody.appendChild(row);
                                }
                                pTable.appendChild(tbody);
                            }
                            return pTable;

                        };

                        var d = document.getElementById("detail_list").getElementsByClassName("tablesorter");
                        while(d.length)
                            document.getElementById("detail_list").removeChild(d[d.length-1]);
                        var c = new tableObject(table);
                        document.getElementById("detail_list").appendChild(c);
                    }
                    function AdjustStyle(){
                        //$(function() {

                        // Extend the themes to change any of the default class names ** NEW **
                        $.extend($.tablesorter.themes.jui, {
                            // change default jQuery uitheme icons - find the full list of icons here: http://jqueryui.com/themeroller/ (hover over them for their name)
                            table      : 'ui-widget ui-widget-content ui-corner-all', // table classes
                            header     : 'ui-widget-header ui-corner-all ui-state-default', // header classes
                            footerRow  : '',
                            footerCells: '',
                            icons      : 'ui-icon', // icon class added to the <i> in the header
                            sortNone   : 'ui-icon-carat-2-n-s',
                            sortAsc    : 'ui-icon-carat-1-n',
                            sortDesc   : 'ui-icon-carat-1-s',
                            active     : 'ui-state-active', // applied when column is sorted
                            hover      : 'ui-state-hover',  // hover class
                            filterRow  : '',
                            even       : 'ui-widget-content', // odd row zebra striping
                            odd        : 'ui-state-default'   // even row zebra striping
                        });

                        // call the tablesorter plugin and apply the ui theme widget
                        $("table").tablesorter({

                            theme : 'blue', // theme "jui" and "bootstrap" override the uitheme widget option in v2.7+

                            headerTemplate : '{content} {icon}', // needed to add icon for jui theme

                            // widget code now contained in the jquery.tablesorter.widgets.js file
                            widgets : ['uitheme', 'zebra' , 'resizable', 'stickyHeaders'],

                            widgetOptions : {
                                // zebra striping class names - the uitheme widget adds the class names defined in
                                // $.tablesorter.themes to the zebra widget class names
                                zebra   : ["even", "odd"],
                                // set the uitheme widget to use the jQuery UI theme class names
                                // ** this is now optional, and will be overridden if the theme name exists in $.tablesorter.themes **
                                // uitheme : 'jui'
                                // css class name applied to the sticky header
                                resizable : false,
                                // css class name applied to the sticky header
                                stickyHeaders : "tablesorter-stickyHeader"
                            }

                        });
                    }
                    //});
                </script>
            </div>
        </div>
    </div>
<!--
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span3">
            <div id="prjtree" style="background-color:#5f9ea0"></div>
        </div>

        <div class="span9">
            <div class="vertical_fluid">
                <div class="vertical_layout9" style="background-color:#5f9ea0"></div>
                <div class="vertical_layout3" style="background-color:#5f9ea0"></div>
            </div>
        </div>
    </div>
</div>
-->
<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../assets/js/bootstrap.min.js"></script>
</body>
</html>